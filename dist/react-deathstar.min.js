!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("react-deathstar",[],t):"object"==typeof exports?exports["react-deathstar"]=t():e["react-deathstar"]=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,i){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(2),a=function(e){return e&&e.__esModule?e:{default:e}}(o),c="";try{c=i(!function(){var e=new Error('Cannot find module "../../../death-star-minify.conf"');throw e.code="MODULE_NOT_FOUND",e}())}catch(e){console.error("You need to create a configuration file for the library, please read the documentation at https://github.com/erickstryck/react-deathStar/blob/master/README.md"),c={minify:!1}}var h="",u=function(){function e(t){r(this,e),this.createElement=t.createElement,this.storage={},this.setStore.bind(this),this.checkKey.bind(this),this.htmlDict=[],this.minify=c.minify,this.minf.bind(this),this.builder.bind(this),this.putStore.bind(this),this.setContext.bind(this),this.getContext.bind(this),this.getStore.bind(this),this.deleteStore.bind(this),this.keys.bind(this)}return s(e,[{key:"builder",value:function(e,t,i){return i&&0===i.length&&(i=null),t=t.children?Object.assign({},t,{children:null}):t,t=-1!==Object.keys(t).indexOf("key")?Object.assign({},t,{key:t.key}):Object.assign({},t,{key:this.getId()}),this.createElement(e,t,i)}},{key:"clearBus",value:function(){this.storage={}}},{key:"setContext",value:function(e,t){this.putStore(e+"_context",t,!0)}},{key:"getContext",value:function(e){return this.getStore(e+"_context")}},{key:"putStore",value:function(e,t,i){if(!i)return this.storage[e]=t,t;t.update=function(){t.setState({deathStartUpdater:!!t.deathStartUpdater})};var n={};Object.keys(t).map(function(e){"function"==typeof t[e]&&(n[e]=t[e])}),n.state=t.state,this.storage[e]=n}},{key:"getStore",value:function(e){return this.storage[e]}},{key:"deleteStore",value:function(e){delete this.storage[e]}},{key:"keys",value:function(){return Object.keys(this.storage)}},{key:"destroy",value:function(e){var t=this;if(e instanceof Array){var i=this.keys();e.map(function(e){i.map(function(i){i.split("-")[0]===e&&t.deleteStore(e)},t)},this)}else{this.keys().map(function(i){i.split("-")[0]===e&&t.deleteStore(i)},this)}}},{key:"minf",value:function(e){var t=this;return this.minify&&e.match(/(-\w[a-zA-Z]+)/g)&&e.match(/(-\w[a-zA-Z]+)/g).map(function(i){-1===t.htmlDict.indexOf(i.substring(1,e.length))&&(e=e.replace(i.substring(1,e.length),"t"))}),e}},{key:"container",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.props;return-1!==Object.keys(e).indexOf("key")&&e.key&&!t&&(i=Object.assign({},i,{key:e.key})),-1!==Object.keys(e).indexOf("ref")&&e.ref&&(i=Object.assign({},i,{ref:e.ref})),this.builder(e.type,i||null,-1!==Object.keys(e.props).indexOf("children")?this.processChildren(e.props.children,t):[])}},{key:"processChildren",value:function(e,t){return e?e instanceof Array?e.length>0?e.map(function(e){if(e)return e.type?this.container(e,t):e},this):null:e.type?this.container(e,t):e:null}},{key:"processElement",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3],r=this.setStore(t,e,i);return this.mapChildrens(r.props.children,t),n&&this.setContext(t,n),this.manipulate(t)}},{key:"mapChildrens",value:function(e,t){e&&(e instanceof Array?e.map(function(e,i){e&&(++i,e.props&&this.mapChildrens(e.props.children,t+"-"+this.haveTypeName(e.type)+i),e.props&&this.putStore(t+"-"+this.haveTypeName(e.type)+i,e.key))},this):(e.props&&this.mapChildrens(e.props.children,t+"-"+this.haveTypeName(e.type)+"1"),e.props&&this.putStore(t+"-"+this.haveTypeName(e.type)+"1",e.key)))}},{key:"haveTypeName",value:function(e){return this.minify&&"string"==typeof e&&-1===this.htmlDict.indexOf(e)&&this.htmlDict.push(e),e.displayName?e.displayName:e.name?e.name:e}},{key:"getId",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"_"+e()+"_"+e()+"_"+e()+"_"+e()+e()+e()}},{key:"setStore",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.putStore(e,this.container(t,i))}},{key:"manipulate",value:function(e){return e=this.minf(e),this.checkKey(e)?new a.default(e):""}},{key:"manipulateCopy",value:function(e,t){return e=this.minf(e),this.manipulate(e).copy(t)}},{key:"getElement",value:function(e){if(e=this.minf(e),this.checkKey(e)){var t=this.getStore(e),i=t.props?t.key:t,n=e.split("-");if(this.checkKey(n[0])){var r=this.getStore(n[0]);return r.key===i?r:this.walkChildren(r.props.children,i)}}}},{key:"setProps",value:function(e,t){if(!(e||t instanceof Object))return void console.log("metodo: setProps - Você precisa especificar uma key em string e um props no formato objeto!");if(this.checkKey(e)){var i=this.getElement(e);-1!==Object.keys(t).indexOf("ref")&&(i=Object.assign({},i,{ref:t.ref}),delete t.ref),i=this.swapPropsAttr(i,t),this.updateAllReferences(i)}}},{key:"walkChildren",value:function(e,t){var i="";if(e)if(e instanceof Array){for(var n=0;n<e.length;n++)if(e[n]){if(e[n].key===t)return e[n];if(e[n].props&&(i=this.walkChildren(e[n].props.children,t)),i&&i.key===t)return i}}else{if(e.key===t)return e;if(e.props&&(i=this.walkChildren(e.props.children,t)),i&&i.key===t)return i}}},{key:"copy",value:function(e,t){return this.checkKey(e)?this.processElement(this.getElement(e),t,!0):""}},{key:"setAttribute",value:function(e,t){if(!e&&!t||!(t instanceof Object))return void console.log("metodo: setAttributes - Você precisa especificar uma key em string e um atributo no formato objeto!");if(this.checkKey(e))if(t.ref){var i=this.getElement(e),n=Object.assign({},i,t);this.updateAllReferences(n)}else if(this.checkProps(e)){var r=this.getElement(e),s=this.swapPropsAttr(r,t);this.updateAllReferences(s)}}},{key:"modifyAttribute",value:function(e,t){var i=this;Object.keys(t).map(function(n){i.processModify(e,n,t[n])},this)}},{key:"processModify",value:function(e,t,i){if(!e&&!t&&!i)return void console.log("metodo: modifyAttribute - Você precisa especificar a key, o nome do atributo e seu valor por parâmetro!");if(this.checkKey(e)&&this.checkProps(e)&&(this.checkAttribute(e,t)||"ref"===t)){var n=this.getElement(e);if("ref"===t){var r=Object.assign({},n,{ref:i});this.updateAllReferences(r)}else{var s={};s[t]=i;var o=this.swapPropsAttr(n,s);this.updateAllReferences(o)}}}},{key:"removeAttribute",value:function(e,t){var i=this;t instanceof Array?t.map(function(t){i.processRemove(e,t)},this):this.processRemove(e,t)}},{key:"processRemove",value:function(e,t){if(!e&&!t)return void console.log("metodo: removeAttribute - Você precisa especificar uma key em string e o nome do atributo a ser removido!");if(this.checkKey(e)&&this.checkProps(e)){var i=this.getElement(e);if("ref"===t){var n=Object.assign({},i,{ref:null});this.updateAllReferences(n)}if(this.checkAttribute(e,t)){var r=Object.keys(i.props);r.splice(r.indexOf(t),1);var s={};r.map(function(e){s[e]=i.props[e]});var o=Object.assign({},i,{props:s});this.updateAllReferences(o)}}}},{key:"setChildren",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e&&!t)return void console.log("metodo: setChildren - Você precisa especificar a key e um elemento a ser inserido!");if(this.checkKey(e)){var s=this.getElement(e);if(this.checkProps(e))if(s.props.children)if(t instanceof Array){var o=s.props.children;o instanceof Array||(o=new Array(o));var a={};if(i){var c,h;i--,r?(c=o).splice.apply(c,[i,0].concat(n(t))):(h=o).splice.apply(h,[i,1].concat(n(t))),a=this.swapPropsAttr(s,{children:o})}else a=this.swapPropsAttr(s,{children:o.concat(t)});this.updateAllReferences(a)}else{var u=s.props.children instanceof Array?s.props.children:new Array(s.props.children);i?(i--,r?u.splice(i,0,t):u[i]=t):u.push(t);var l=this.swapPropsAttr(s,{children:u});this.updateAllReferences(l)}else{var f=this.swapPropsAttr(s,{children:t});this.updateAllReferences(f)}}}},{key:"removeChildren",value:function(e,t){var i=this;t instanceof Array&&-1!==t?t.map(function(t){i.processRemoveChildren(e,t)},this):-1===t?this.processResetChildren(e):this.processRemoveChildren(e,t)}},{key:"processRemoveChildren",value:function(e,t){if(t--,!e&&t)return void console.log("metodo: removeChildren - Você precisa especificar a key onde será retirada a children e o índice que corresponde a children a ser removida!");if(this.checkKey(e)){var i=this.getElement(e);if(i.props.children instanceof Array){var n=i.props.children.filter(function(e,i){return t!==i}),r=this.swapPropsAttr(i,{children:n});this.updateAllReferences(r)}else{var s=this.swapPropsAttr(i,{children:null});this.updateAllReferences(s)}}else console.log("Chave não encontrada!")}},{key:"processResetChildren",value:function(e){if(!e)return void console.log("metodo: removeChildren - Você precisa especificar a key onde será retirada os childrens !");if(this.checkKey(e)){var t=this.getElement(e),i=this.swapPropsAttr(t,{children:null});this.updateAllReferences(i)}else console.log("Chave não encontrada!")}},{key:"updateAllReferences",value:function(e){this.keys().map(function(t){var i=this.getStore(t);if(i.props)if(i.key!==e.key){var n=this.checkChildrensInArray(e,i);this.putStore(t,this.processElement(this.swapPropsAttr(i,{children:n}),t).getElement())}else this.putStore(t,this.processElement(e,t).getElement())},this)}},{key:"checkChildrensInArray",value:function(e,t){if(t&&t.props){var i=t.props.children,n=[];if(i&&i instanceof Array)return i.map(function(t){var i=this.checkChildrensInArray(e,t);n=this.compareChildrens(e,t,n,i)},this),n;if(i&&i.props){var r=this.checkChildrensInArray(e,i);return n=this.compareChildrens(e,i,n,r)}return i}return t}},{key:"compareChildrens",value:function(e,t,i,n){return t&&t.key&&t.key===e.key?i.push(e):t&&t.props?i.push(this.swapPropsAttr(t,{children:n})):i.push(t),i}},{key:"swapPropsAttr",value:function(e,t){var i=Object.assign({},e.props,t);return Object.assign({},e,{props:i})}},{key:"checkKey",value:function(e){return-1!==this.keys().indexOf(e)}},{key:"checkProps",value:function(e){return!!this.checkKey(e)&&-1!==Object.keys(this.getElement(e)).indexOf("props")}},{key:"checkAttribute",value:function(e,t){return!!this.checkKey(e)&&(!!this.checkProps(e)&&-1!==Object.keys(this.getElement(e).props).indexOf(t))}}],[{key:"getInstance",value:function(t){return h||(h=new e(t))}}]),e}();t.default=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(0),o=function(e){return e&&e.__esModule?e:{default:e}}(s),a=function(){function e(t){n(this,e),this.instance=o.default.getInstance(),this.key=this.instance.minf(t)}return r(e,[{key:"getMyKey",value:function(){return this.key}},{key:"getElement",value:function(){return this.instance.getElement(this.key)}},{key:"copy",value:function(e){return this.instance.copy(this.key,e)}},{key:"setAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance.setAttribute(this.key,e),t){this.instance.getContext(this.key).update()}return this}},{key:"setProps",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance.setProps(this.key,e),t){this.instance.getContext(this.key).update()}return this}},{key:"modifyAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance.modifyAttribute(this.key,e),t){this.instance.getContext(this.key).update()}return this}},{key:"removeAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance.removeAttribute(this.key,e),t){this.instance.getContext(this.key).update()}return this}},{key:"setChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.instance.setChildren(this.key,e,t,i),n){this.instance.getContext(this.key).update()}return this}},{key:"removeChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance.removeChildren(this.key,e),t){this.instance.getContext(this.key).update()}return this}},{key:"checkAttribute",value:function(e){return this.instance.checkAttribute(this.key,e)}},{key:"manipulateCopy",value:function(e){return this.instance.manipulateCopy(this.key,e)}},{key:"manipulate",value:function(e){return this.key=this.instance.minf(e),this}},{key:"destroy",value:function(e){return this.instance.destroy(e),this}}]),e}();t.default=a}])});